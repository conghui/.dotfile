# The following content is append to ~/.bashrc
[[ -f $HOME/.bash_theme ]] && . $HOME/.bash_theme

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize

# do not save empty lines in the history
export HISTCONTROL=ignorespace

# I want a lot..
export HISTFILESIZE=1000

# aliases
if [ -f $HOME/.alias ]; then
    . $HOME/.alias
fi

# create temporary directory for today and clean up old empty ones
if [ $(id -u) -ne 0 ]; then
    OLD_PWD=$(pwd)

    TEMP_ROOT=/tmp
    TEMP_TODAY=$(date +%Y-%m-%d)
    export TEMP_DIR=$TEMP_ROOT/$TEMP_TODAY

    mkdir -p $TEMP_DIR
    cd $TEMP_ROOT
    ls | while read dir; do
        if [ "$dir" != "$TEMP_TODAY" ] && [ "$dir" != "$TEMP_TODAY/" ]; then
            rmdir $dir 2>/dev/null
        fi
    done

    # just type "td" to go to your actual temp directory
    alias td="cd $TEMP_DIR"

    cd $OLD_PWD
fi

# shortcut for making a screenshot
IMPORT="$(which import)"
if [ ! -z $IMPORT ]; then
    alias screenshot="sleep 2 && import -window root -quality 90 $TEMP_DIR/screenshot_$(date +%Y%m%d_%H%M%S).jpg && echo $TEMP_DIR/screenshot_$(date +%Y%m%d_%H%M%S).jpg"
fi

# shortcut to copy the current command at bash prompt
bind '"\C-]":"\C-e\C-u pbcopy <<"EOF"\n\C-y\nEOF\n"'

export EDITOR=vim
export PAGER="less"

export GREP_OPTIONS='--color=auto'
export GREP_COLOR='3;33'

# viriables for fcitx
export XMODIFIERS="@im=fcitx"
export XIM=fcitx
export XIM_PROGRAM=fcitx

# export PATH, MANPATH, INFOPATH for texlive 2012
export PATH=/usr/local/texlive/2012/bin/x86_64-linux:$PATH
export MANPATH=/usr/local/texlive/2012/texmf/doc/man:$MANPATH
export INFOPATH=/usr/local/texlive/2012/texmf/doc/info:$INFOPATH

# export PATH
export PATH=$HOME/.vim/local/bin:${PATH}
export PATH=$HOME/Dropbox/bin:${PATH}
export PATH=$HOME/.cfg/mutt-config/bin:$PATH
export PATH=${PATH}:/usr/sbin/

# vim: ft=zsh
